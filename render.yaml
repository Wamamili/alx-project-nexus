# Render service manifest for Project Nexus (byteMtaani)
#
# This manifest defines two services:
#  - byteMtaani-frontend: Node (Next.js) service located under `byteMtaani/`
#  - byteMtaani-backend: Docker service using `byteMtaaniBackend/Dockerfile`
#
# Replace placeholder values (service names, region, branch) and set the
# environment variables in the Render dashboard or via the CLI after
# creating the services.

services:
  - type: web
    name: byteMtaani-frontend
    env: node
    # Optional: change region and branch to match your repo settings
    region: oregon
    branch: main
    buildCommand: cd byteMtaani && npm ci && npm run build
    startCommand: cd byteMtaani && npm run start
    envVars:
      - key: NEXT_PUBLIC_API_BASE
        # Set this to your backend's public URL after creating the backend service
        value: "https://<your-backend-service>.onrender.com"
    # Health check (optional)
    healthCheckPath: /

  - type: web
    name: byteMtaani-backend
    env: docker
    dockerfilePath: byteMtaaniBackend/Dockerfile
    region: oregon
    branch: main
    plan: free
    # Recommended environment variables to configure in Render dashboard
    envVars:
      - key: SECRET_KEY
        # mark as sensitive in Render (set via dashboard)
        sync: false
      - key: DATABASE_URL
        sync: false
      - key: DEBUG
        value: "False"
      - key: ALLOWED_HOSTS
        value: "*"
      - key: CORS_ALLOWED_ORIGINS
        # Comma separated list if needed; for local dev we used http://localhost:4028
        value: "https://<your-frontend-service>.onrender.com"
    # Command that will be run inside the Docker container (Render will use the Dockerfile)
    # If you prefer, you can set a `startCommand` here that overrides the Dockerfile entrypoint.
